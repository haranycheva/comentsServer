{"mappings":"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","sources":["src/js/refs.js","src/js/getFormValues.js","src/js/commentClass.js","src/js/createComment.js","src/js/createCommentCard.js","src/js/fetch.js","src/js/addComment.js","src/js/deleteComment.js","src/js/localStorage.js","src/js/modalOpenAndClose.js","src/index.js","src/js/clickOnBtn.js","src/js/onSubmitForm.js","src/js/onSubmitModalForm.js","src/js/populateMarkup.js"],"sourcesContent":["export const refs = {\n    commentForm: document.forms[\"comment-form\"],\n    commentList: document.querySelector(\".comments-list\"),\n    modal: document.querySelector(\".back-modal-my\"),\n    modalForm: document.forms[\"modal-form\"]\n}\n\nexport let lastChanged = null;","export function getFormValues(form){\n    const formData = new FormData(form)\n    const data = []\n    formData.forEach((v, k) => data[k] = v)\n    return data;\n}","export class Comment {\n  constructor({ title, body } = {}) {\n    this[\"title\"] = title;\n    this[\"body\"] = body;\n    this[\"id\"] = Date.now();\n  }\n}\n","import { refs } from \"./refs.js\";\nimport { getFormValues } from \"./getFormValues.js\";\nimport { Comment } from \"./commentClass.js\";\n\nexport function createComment(){\n    const data = getFormValues(refs.commentForm)\n    const comment = new Comment({title: data.title, body: data.body})\n    return comment;\n}","export function createCommentCard(comment) {\n  return `<li class=\"card\" style=\"width: 18rem\" data-id=\"${comment.id}\">\n    <div class=\"card-body\">\n      <h5 class=\"card-title\">${comment.title}</h5>\n      <p class=\"card-text\">\n      ${comment.body}\n      </p>\n      <ul class=\"btn-list\">\n        <button type=\"button\" href=\"#\" class=\"btn btn-primary change\">\n          change\n        </button>\n        <button type=\"button\" href=\"#\" class=\"btn btn-primary delete\">\n          delete\n        </button>\n      </ul>\n    </div>\n  </li>`;\n}\n","const BASE__URL = 'http://localhost:3000/coments';\nexport function  fetchComment(comment, httpMethod) { \n  const options = {\n    method: `${httpMethod}`,\n    headers: {\n      'Content-Type': 'application/json',\n      Accept: 'application/json',\n    },\n    body: JSON.stringify(comment),\n  };\n  let url = BASE__URL;\n  if(httpMethod === \"DELETE\" || httpMethod === \"PUT\"){\n    url += `/${comment.id}`\n  }\n  return fetch(`${url}`, options).then(res => res.json());\n}\n\nexport function getComment(){\n  return fetch(`${BASE__URL}`).then(res => res.json())\n}\n\n// addPost({\n//   userId: 2,\n//   title: 'nya',\n//   body: 'test new',\n// }).then(res => console.log(res));\n","import { createComment } from \"./createComment.js\"\nimport { createCommentCard } from \"./createCommentCard.js\";\nimport { refs } from \"./refs.js\";\nimport { fetchComment } from \"./fetch.js\";\n\nexport function addComment(){\n    const newComment = createComment();\n    if (!newComment.title || !newComment.body){\n        alert(\"enter the comment detailst\")\n        return\n    }\n    const newCommentCard = createCommentCard(newComment)\n    refs.commentList.insertAdjacentHTML(\"beforeend\", newCommentCard)\n    fetchComment(newComment, \"POST\")\n}\n\n// ироирорио","import { refs } from \"./refs.js\";\nimport { getComment } from \"./fetch.js\";\nimport { fetchComment } from \"./fetch.js\";\n\nexport async function deleteCard(e){\n    const saveData = await getComment();\n    for(const elem of saveData){\n        if(e.target.closest(`[data-id=\"${elem.id}\"]`)){\n            e.target.closest(\".card\").style.display = \"none\";\n            fetchComment(elem, \"DELETE\")\n        }\n    };\n}","const KEY = \"changed\";\n\n\nfunction save(value){\n    const valueJSON = JSON.stringify(value);\n    return localStorage.setItem(KEY, valueJSON)\n}\n\nfunction load(){\n    const saveLocal = localStorage.getItem(KEY) \n    ? JSON.parse(localStorage.getItem(KEY))\n    : undefined;\n    return saveLocal;\n}\n\nexport default{\n    save,\n    load,\n}","import { refs } from './refs.js';\nimport { getComment } from './fetch.js';\nimport localStorage from './localStorage.js';\n\nexport function closeModal(e) {\n  if (e.target.closest(\".modal-my\")) {\n    return;\n  }\n  refs.modal.classList.add('is-hidden');\n  refs.modal.removeEventListener('click', closeModal);\n}\n\nexport async function openModal(e) {\n  refs.modal.classList.remove('is-hidden');\n  const saveData = await getComment();\n  for (const elem of saveData) {\n    if (e.target.closest(`[data-id=\"${elem.id}\"]`)) {\n      const modalFormEls = refs.modalForm.elements;\n      modalFormEls.title.value = elem.title;\n      modalFormEls.text.value = elem.body;\n      refs.modal.addEventListener(\"click\", closeModal)\n      localStorage.save(elem.id)\n    }\n  }\n}\n","import { refs } from \"./js/refs.js\"\nimport { onSubmitForm } from \"./js/onSubmitForm.js\"\nimport { populateMarkup } from \"./js/populateMarkup.js\"\nimport { clickOnBtn } from \"./js/clickOnBtn.js\"\nimport { onSubmitModalForm } from \"./js/onSubmitModalForm.js\"\n\nrefs.commentList.addEventListener(\"click\", clickOnBtn)\nrefs.commentForm.addEventListener(\"submit\", onSubmitForm)\nrefs.modalForm.addEventListener(\"submit\", onSubmitModalForm)\n\npopulateMarkup()","import { deleteCard } from \"./deleteComment.js\";\nimport { openModal } from \"./modalOpenAndClose.js\";\n\nexport async function clickOnBtn(e) {\n  if (e.target.nodeName !== 'BUTTON') {\n    return;\n  }\n  if(e.target.classList.contains(\"delete\")){\n    deleteCard(e)\n  }\n  if(e.target.classList.contains(\"change\")){\n    openModal(e)\n  }\n}\n","import { refs } from \"./refs.js\"\nimport { addComment } from \"./addComment.js\"\n\nexport function onSubmitForm(e){\n    e.preventDefault()\n    addComment()\n    refs.commentForm.reset()\n}\n","import { getFormValues } from \"./getFormValues.js\"\nimport { createCommentCard } from \"./createCommentCard.js\";\nimport { getComment } from \"./fetch.js\";\nimport localStorage from \"./localStorage.js\";\nimport { refs } from \"./refs\";\nimport { fetchComment } from \"./fetch.js\";\n\nexport async function onSubmitModalForm(e){\n    e.preventDefault()\n    const formData = getFormValues(refs.modalForm);\n    const saveData = await getComment();\n    for (const elem of saveData) {\n        if(localStorage.load() === elem.id){\n            elem.title = formData.title\n            elem.body = formData.text\n            const elCard = document.querySelector(`[data-id=\"${elem.id}\"]`)\n            elCard.innerHTML = createCommentCard(elem)\n            refs.modal.classList.add('is-hidden');\n            fetchComment(elem, \"PUT\")\n        }\n    }\n}","import { getComment } from \"./fetch.js\"\nimport { createCommentCard } from \"./createCommentCard.js\"\nimport { refs } from \"./refs.js\"\n\n\nexport async function populateMarkup(){\n    const saveData = await getComment()\n    const commentCards = saveData.map(comment => createCommentCard(comment))\n    refs.commentList.insertAdjacentHTML(\"beforeend\", commentCards.join(\"\"))\n}"],"names":["$ee27a4d7c64fc8c4$export$21666b427502ea6d","commentForm","document","forms","commentList","querySelector","modal","modalForm","$1ece225d8d085ff2$export$e992d02417fcc76c","form","formData","FormData","data","forEach","v","k","$9bf5d5027771833f$export$4d299b491347818a","constructor","title","body","this","Date","now","$8e9eb8b19f6b183d$export$2a15b079e3f46654","$fe237540d95e4ba2$export$24aaa95b7e366ad5","comment","id","$924b66e829bc1184$export$66752be9311cfe87","httpMethod","options","method","headers","Accept","JSON","stringify","url","fetch","then","res","json","$924b66e829bc1184$export$44d993ebda59cd80","$11d1f910a51f7f8f$export$1cab2cf04e810197","newComment","alert","newCommentCard","insertAdjacentHTML","async","$e10db09c4d1fa3b7$export$cbb49d44ad636b27","e","saveData","elem","target","closest","style","display","$2338c8cd734f85a6$export$2e2bcd8739ae039","value","valueJSON","localStorage","setItem","getItem","parse","undefined","$e52a0499dc542f9d$export$3f6fecd573f3fa48","classList","add","removeEventListener","$e52a0499dc542f9d$export$a7f6cffb6b8ba11c","remove","modalFormEls","elements","text","addEventListener","save","nodeName","contains","preventDefault","reset","load","innerHTML","commentCards","map","join"],"version":3,"file":"index.a60d5faa.js.map"}